<html>
<head>
	<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">		
</head>
<body onload="render()">
<div class="w3-container w3-teal">
	<h1>诗词纵横</h1>
</div>
<div id="all" class="w3-row-padding w3-margin-top"></div>
<script type="text/javascript" src="poems.json"></script>	
<script>

var image_dir = AllPoems.image_dir;
var allCards = [];

function render(){	
	var container = document.getElementById("all")
	for (var i=0; i <AllPoems.poems.length; ++i)
	{
		allCards.push(new card(AllPoems.poems[i]));
		container.append(allCards[allCards.length-1].node);
	}
}

function card(poem){
	this.poem = poem;
	this.node = CreatePoemCard(this.poem.title, this.poem.author, this.poem.image);
}

function CreatePoemCard(title, author, image){
	var top = document.createElement("div");
	top.setAttribute("class", "w3-col s2");
	
	var div = document.createElement("div");	
	div.setAttribute("class", "w3-card-4 w3-center w3-sand");	
	
	var img = document.createElement("img");
	img.setAttribute("src", image_dir + image);
	img.setAttribute("style", "height:250");
	img.setAttribute("class", "w3-image w3-circle w3-hover-shadow");
	
	div.append(CreateText("h1", title));
	div.append(img);
	div.append(CreateText("h2", author));
	
	top.append(div);
	
	return top;
}

function CreateText(tag, text){
	var node = document.createElement(tag);
	var txt = document.createTextNode(text);
	node.style.fontFamily="KaiTi";
	node.append(txt);
	return node
}

</script>		
</body>
</html>